!function(){metadata={systemName:"csvreader",displayName:"CSV Reader Broker",description:"A broker that reads a CSV file and returns each line as a list."},ondescribe=async function({configuration:e}){postSchema({objects:{lines:{displayName:"Lines",description:"Describes all lines in a CSV file",properties:{fileContent:{displayName:"File Content",type:"string"},line:{displayName:"Line",type:"string"}},methods:{getLines:{displayName:"Get Lines",type:"list",inputs:["fileContent"],outputs:["line"]}}}}})},onexecute=async function({objectName:t,methodName:r,parameters:n,properties:o,configuration:a,schema:i}){switch(t){case"lines":await async function(t,r){switch(t){case"getLines":await function(t){return new Promise((r,n)=>{try{var o=e.decode((i=t.fileContent.toString(),i.split("<content>")[1].split("</content>")[0])).split(/\r?\n/),a=[];for(let e=0;e<o.length;e++)a.push({line:o[e]});postResult(a.map(e=>({line:e.line}))),r()}catch(e){n(e)}var i})}(r);break;default:throw new Error("The method "+t+" is not supported.")}}(r,o);break;default:throw new Error("The object "+t+" is not supported.")}};var e={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var r,n,o,a,i,s,c,h="",d=0;for(t=e._utf8_encode(t);d<t.length;)a=(r=t.charCodeAt(d++))>>2,i=(3&r)<<4|(n=t.charCodeAt(d++))>>4,s=(15&n)<<2|(o=t.charCodeAt(d++))>>6,c=63&o,isNaN(n)?s=c=64:isNaN(o)&&(c=64),h=h+this._keyStr.charAt(a)+this._keyStr.charAt(i)+this._keyStr.charAt(s)+this._keyStr.charAt(c);return h},decode:function(t){var r,n,o,a,i,s,c="",h=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<t.length;)r=this._keyStr.indexOf(t.charAt(h++))<<2|(a=this._keyStr.indexOf(t.charAt(h++)))>>4,n=(15&a)<<4|(i=this._keyStr.indexOf(t.charAt(h++)))>>2,o=(3&i)<<6|(s=this._keyStr.indexOf(t.charAt(h++))),c+=String.fromCharCode(r),64!=i&&(c+=String.fromCharCode(n)),64!=s&&(c+=String.fromCharCode(o));return c=e._utf8_decode(c)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t="",r=0,n=0,o=0,a=0;r<e.length;)(n=e.charCodeAt(r))<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(o=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&o),r+=2):(o=e.charCodeAt(r+1),a=e.charCodeAt(r+2),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),r+=3);return t}}}();
//# sourceMappingURL=index.js.map
